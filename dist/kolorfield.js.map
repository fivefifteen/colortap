{"version":3,"file":"kolorfield.js","sources":["../src/kolorfield.js"],"sourcesContent":["/*!\n  kolorfield v0.2.0 (https://kolorfield.js.org)\n  by Kodie Grantham (https://kodieg.com)\n*/\n\nconst kolorfield = () => {\n  const elements = document.getElementsByClassName('kolorfield')\n\n  for (let i = 0; i < elements.length; i++) {\n    (function (element) {\n      const input = element.querySelector('input[type=\"color\"]')\n\n      if (input) {\n        const openElements = element.getElementsByClassName('kolorfield-open')\n        const valueInputs = element.getElementsByClassName('kolorfield-input')\n        const valueElements = element.getElementsByClassName('kolorfield-value')\n        const stylePropElements = element.querySelectorAll('[data-kolorfield-style-prop]')\n\n        element.open = function () {\n          input.focus()\n          input.click()\n        }\n\n        element.set = function (value) {\n          const currentValue = input.value\n\n          if (value.charAt(0) !== '#') value = '#' + value\n          if (value === currentValue) return\n          if (value.length > 7) value = value.substr(0, 7)\n\n          if (value.length >= 4 && value.length < 7) {\n            value = '#' + value[1] + value[1] + value[2] + value[2] + value[3] + value[3]\n          }\n\n          input.value = value\n\n          kolorfield.triggerEvent('change', input)\n        }\n\n        element.get = function () {\n          return input.value\n        }\n\n        if (openElements.length) {\n          for (let j = 0; j < openElements.length; j++) {\n            const openElement = openElements[j]\n\n            openElement.addEventListener('click', function (e) {\n              element.open()\n            }, false)\n\n            openElement.addEventListener('focus', function (e) {\n              element.open()\n            }, false)\n          }\n        }\n\n        if (valueInputs.length) {\n          for (let v = 0; v < valueInputs.length; v++) {\n            const valueInput = valueInputs[v]\n\n            valueInput.addEventListener('change', function (e) {\n              if (!e.kolorfieldTriggered) {\n                element.set(valueInput.value)\n              }\n            }, false)\n\n            valueInput.addEventListener('input', function (e) {\n              if (valueInput.kolorfieldTimer) {\n                clearTimeout(valueInput.kolorfieldTimer)\n              }\n\n              valueInput.kolorfieldTimer = kolorfield.triggerEvent('change', valueInput, {}, 1000)\n            })\n          }\n        }\n\n        input.addEventListener('change', function (e) {\n          if (valueInputs.length) {\n            for (let a = 0; a < valueInputs.length; a++) {\n              const valueInput = valueInputs[a]\n              valueInput.value = input.value\n            }\n          }\n\n          if (valueElements.length) {\n            for (let b = 0; b < valueElements.length; b++) {\n              const valueElement = valueElements[b]\n              const valueElementType = valueElement.tagName.toLowerCase()\n\n              if (valueElementType === 'input') {\n                valueElement.val = input.value\n              } else {\n                valueElement.textContent = input.value\n              }\n            }\n          }\n\n          if (stylePropElements.length) {\n            for (let c = 0; c < stylePropElements.length; c++) {\n              const stylePropElement = stylePropElements[c]\n              const styleProps = stylePropElement.getAttribute('data-kolorfield-style-prop').split(',')\n\n              for (let k = 0; k < styleProps.length; k++) {\n                stylePropElement.style[styleProps[k]] = input.value\n              }\n            }\n          }\n        })\n\n        kolorfield.triggerEvent('change', input)\n      } else {\n        console.warn(element, 'An color input field is required for each kolorfield instance.')\n      }\n    })(elements[i])\n  }\n\n  return elements\n}\n\nkolorfield.triggerEvent = (type, element, data, delay) => {\n  return setTimeout(function () {\n    const e = new Event(type, { bubbles: true })\n\n    for (const key in data) {\n      if (Object.prototype.hasOwnProperty.call(data, key)) {\n        e[key] = data[key]\n      }\n    }\n\n    element.dispatchEvent(e)\n  }, delay || 1)\n}\n\nexport default kolorfield\n"],"names":["kolorfield","elements","document","getElementsByClassName","i","length","element","input","querySelector","openElements","valueInputs","valueElements","stylePropElements","querySelectorAll","open","focus","click","set","value","currentValue","charAt","substr","triggerEvent","get","j","openElement","addEventListener","e","_loop","valueInput","v","kolorfieldTriggered","kolorfieldTimer","clearTimeout","a","b","valueElement","valueElementType","tagName","toLowerCase","val","textContent","c","stylePropElement","styleProps","getAttribute","split","k","style","console","warn","type","data","delay","setTimeout","Event","bubbles","key","Object","prototype","hasOwnProperty","call","dispatchEvent"],"mappings":"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"}