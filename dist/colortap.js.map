{"version":3,"file":"colortap.js","sources":["../src/colortap.js"],"sourcesContent":["/*!\n  colortap v0.3.0 (https://colortap.js.org)\n  by Five Fifteen (https://fivefifteen.com)\n*/\n\nconst colortap = () => {\n  const elements = document.getElementsByClassName('colortap')\n\n  for (let i = 0; i < elements.length; i++) {\n    (function (element) {\n      const input = element.querySelector('input[type=\"color\"]')\n\n      if (input) {\n        const openElements = element.getElementsByClassName('colortap-open')\n        const valueInputs = element.getElementsByClassName('colortap-input')\n        const valueElements = element.getElementsByClassName('colortap-value')\n        const stylePropElements = element.querySelectorAll('[data-colortap-style-prop]')\n\n        element.open = function () {\n          input.focus()\n          input.click()\n        }\n\n        element.set = function (value) {\n          const currentValue = input.value\n\n          if (value.charAt(0) !== '#') value = '#' + value\n          if (value === currentValue) return\n          if (value.length > 7) value = value.substr(0, 7)\n\n          if (value.length >= 4 && value.length < 7) {\n            value = '#' + value[1] + value[1] + value[2] + value[2] + value[3] + value[3]\n          }\n\n          input.value = value\n\n          colortap.triggerEvent('change', input)\n        }\n\n        element.get = function () {\n          return input.value\n        }\n\n        if (openElements.length) {\n          for (let j = 0; j < openElements.length; j++) {\n            const openElement = openElements[j]\n\n            openElement.addEventListener('click', function (e) {\n              element.open()\n            }, false)\n\n            openElement.addEventListener('focus', function (e) {\n              element.open()\n            }, false)\n          }\n        }\n\n        if (valueInputs.length) {\n          for (let v = 0; v < valueInputs.length; v++) {\n            const valueInput = valueInputs[v]\n\n            valueInput.addEventListener('change', function (e) {\n              if (!e.colortapTriggered) {\n                element.set(valueInput.value)\n              }\n            }, false)\n\n            valueInput.addEventListener('input', function (e) {\n              if (valueInput.colortapTimer) {\n                clearTimeout(valueInput.colortapTimer)\n              }\n\n              valueInput.colortapTimer = colortap.triggerEvent('change', valueInput, {}, 1000)\n            })\n          }\n        }\n\n        input.addEventListener('change', function (e) {\n          if (valueInputs.length) {\n            for (let a = 0; a < valueInputs.length; a++) {\n              const valueInput = valueInputs[a]\n              valueInput.value = input.value\n            }\n          }\n\n          if (valueElements.length) {\n            for (let b = 0; b < valueElements.length; b++) {\n              const valueElement = valueElements[b]\n              const valueElementType = valueElement.tagName.toLowerCase()\n\n              if (valueElementType === 'input') {\n                valueElement.val = input.value\n              } else {\n                valueElement.textContent = input.value\n              }\n            }\n          }\n\n          if (stylePropElements.length) {\n            for (let c = 0; c < stylePropElements.length; c++) {\n              const stylePropElement = stylePropElements[c]\n              const styleProps = stylePropElement.getAttribute('data-colortap-style-prop').split(',')\n\n              for (let k = 0; k < styleProps.length; k++) {\n                stylePropElement.style[styleProps[k]] = input.value\n              }\n            }\n          }\n        })\n\n        colortap.triggerEvent('change', input)\n      } else {\n        console.warn(element, 'An color input field is required for each colortap instance.')\n      }\n    })(elements[i])\n  }\n\n  return elements\n}\n\ncolortap.triggerEvent = (type, element, data, delay) => {\n  return setTimeout(function () {\n    const e = new Event(type, { bubbles: true })\n\n    for (const key in data) {\n      if (Object.prototype.hasOwnProperty.call(data, key)) {\n        e[key] = data[key]\n      }\n    }\n\n    element.dispatchEvent(e)\n  }, delay || 1)\n}\n\nexport default colortap\n"],"names":["colortap","elements","document","getElementsByClassName","i","length","element","input","querySelector","openElements","valueInputs","valueElements","stylePropElements","querySelectorAll","open","focus","click","set","value","currentValue","charAt","substr","triggerEvent","get","j","openElement","addEventListener","e","_loop","valueInput","v","colortapTriggered","colortapTimer","clearTimeout","a","b","valueElement","valueElementType","tagName","toLowerCase","val","textContent","c","stylePropElement","styleProps","getAttribute","split","k","style","console","warn","type","data","delay","setTimeout","Event","bubbles","key","Object","prototype","hasOwnProperty","call","dispatchEvent"],"mappings":"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"}